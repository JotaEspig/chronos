
<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>Admin</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/css/style.css">
    </head>
    <body>
      <form onsubmit="addTime(event)">
		    <h1>Adicionar Horário</h1>
		    <label> Dia </label>
		    <input id="date" type="date">
		    <label> Início </label>
		    <input id="inicio" required type="time">
		    <label> Fim </label>
		    <input id="fim" required type="time">


		    <label> Repetição (Toda) </label>
		    <br>
		    <input id="seg" type="checkbox">
		    <label> Seg </label>
		    <br>
		    <input id="ter" type="checkbox">
		    <label> Ter </label>
		    <br>
		    <input id="qua" type="checkbox">
		    <label> Qua </label>
		    <br>
		    <input id="qui" type="checkbox">
		    <label> Qui </label>
		    <br>
		    <input id="sex" type="checkbox">
		    <label> Sex </label>
		    <br>
		    <input id="daily" type="checkbox">
		    <label> Diariamente </label>
		    <br>
		    <input id="weekly" type="checkbox">
		    <label> Semanalmente </label>
		    <input type="submit">
			
	    </form>
      <script src="/js/utils.js"></script>
      <script>
	function addTime(e) {
		e.preventDefault()
		const get = id => document.getElementById(id).value

	  	const date = get("date")
	  	const inicio = get("inicio")
	  	const fim = get("fim")

	  	const seg = get("seg") === "on" ? 1 : 0 
	  	const ter = get("ter") === "on" ? 2 : 0
	  	const qua = get("qua") === "on" ? 4 : 0
	  	const qui = get("qui") === "on" ? 8 : 0
	  	const sex = get("sex") === "on" ? 16 : 0
	  	const daily = get("daily") === "on" ? 32 : 0
	  	const weekly = get("weekly") === "on" ? 64 : 0

		const repeat = seg | ter | qua | qui | sex | daily | weekly 

		fetch("/api/time/add", {
			method: "POST",
			body: JSON.stringify({
				"employee_id": 1,
				"start": date + " " + inicio+":00",
				"end": date + " " + fim+":00",
				"repeat": repeat,
			}),
			headers: {
				"Authorization": "Bearer " + token()
			},

		})
		
		console.log(seg, inicio)

	}
      </script>
    </body>
</html>
